{"version":3,"sources":["../src/index.js"],"names":["LEFT","RIGHT","ESC","LEFT_ARROW","UP_ARROW","RIGHT_ARROW","DOWN_ARROW","ARROWS","matches","openPath","path","i","length","stopPropagation","e","getByValue","options","value","comparator","a","b","undefined","opt","children","childResult","MultiSelectMenu","props","dark","onChange","placeholder","selectedOption","label","defaultProps","MultiMenuWrapper","handleHover","setState","handleKeyDown","indexOf","which","preventDefault","state","align","expandDirection","isSubMenu","menu","onSelect","position","width","MultiMenu","basePath","onHover","styles","map","itm","concat","MenuSpacer","MenuItem","handleClick","data","disabled","slice","open","hasChildren","childrenOnly","subtitle","MultiMenuTrigger","expanded","fitParent","element","rect","getBoundingClientRect","windowWidth","window","innerWidth","center","left","right","top","bottom","menuWidth","handleSelect","val","handleClickOutside","target","handleClose","handleScroll","handleBlur","elementRef","el","addEventListener","removeEventListener","className"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react'\nimport classNames from 'classnames'\nimport DocumentEvents from 'react-document-events'\n\nimport { isDescendent } from './dom'\n\nconst LEFT = 'left'\nconst RIGHT = 'right'\nconst ESC = 27\n\nconst LEFT_ARROW = 37\nconst UP_ARROW = 38\nconst RIGHT_ARROW = 39\nconst DOWN_ARROW = 40\n\nconst ARROWS = [LEFT_ARROW, UP_ARROW, RIGHT_ARROW, DOWN_ARROW]\n\nexport const matches = (openPath, path) => {\n  for (let i = 0; i < path.length; i += 1) {\n    if (openPath[i] !== path[i]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nconst stopPropagation = e => {\n  e.stopPropagation()\n}\n\nconst getByValue = (options, value, comparator=null) => {\n  if (!comparator) { comparator = (a, b) => a === b }\n\n  if (!options) { return undefined }\n\n  for (let opt of options) {\n    if (!opt || !value) { continue }\n\n    if (comparator(opt.value, value)) {\n      return opt\n    }\n\n    if (opt.children) {\n      let childResult = getByValue(opt.children, value)\n\n      if (childResult) { return childResult }\n    }\n  }\n}\n\nexport default class MultiSelectMenu extends Component {\n  static defaultProps = {\n    placeholder: 'Select...'\n  }\n\n  render() {\n    let { comparator, dark, onChange, options, placeholder, value } = this.props\n\n    let selectedOption = getByValue(options, value, comparator)\n\n    let label = selectedOption\n      ? selectedOption.label\n      : <span className=\"multi-select-menu-placeholder\">\n          {placeholder}\n        </span>\n\n    return (\n      <MultiMenuTrigger\n        fitParent\n        className=\"multi-select-menu\"\n        dark={dark}\n        menu={options}\n        onSelect={onChange}\n      >\n        <div className=\"multi-select-menu-selection\">\n          <span className=\"multi-select-menu-value\">\n            {label}\n          </span>\n          <span className=\"multi-select-menu-expand-icon\" />\n        </div>\n      </MultiMenuTrigger>\n    )\n  }\n}\n\nexport class MultiMenuWrapper extends Component {\n  static defaultProps = {\n    expandDirection: RIGHT\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      openPath: [],\n    }\n  }\n\n  handleHover = openPath => {\n    this.setState({ openPath })\n  }\n\n  handleKeyDown = e => {\n    // Prevent arrow-triggered scrolling\n    if (ARROWS.indexOf(e.which) >= 0) {\n      e.preventDefault()\n    }\n\n    if (e.which === UP_ARROW) {\n      // console.log(\"GETTING PREVIOUS VALUE\")\n    } else if (e.which === DOWN_ARROW) {\n      // console.log(\"GETTING NEXT VALUE\")\n    }\n\n  }\n\n  render() {\n    let {\n      align,\n      expandDirection,\n      isSubMenu,\n      menu,\n      onSelect,\n      position\n    } = this.props\n\n    let { openPath } = this.state\n\n    if (!position) { position = {} }\n\n    return (\n      <div\n        className={classNames(\n          'multi-menu-wrapper',\n          `expand-${expandDirection}`\n        )}\n        style={position}\n      >\n        <DocumentEvents\n          onKeyDown={this.handleKeyDown}\n        />\n        <MultiMenu\n          {...{ isSubMenu, onSelect }}\n          basePath={[]}\n          menu={menu}\n          openPath={openPath}\n          width={position.width}\n          onHover={this.handleHover}\n        />\n      </div>\n    )\n  }\n}\n\nexport class MultiMenu extends Component {\n  render() {\n    let {\n      basePath,\n      isSubMenu,\n      menu,\n      onHover,\n      onSelect,\n      openPath,\n      width,\n    } = this.props\n\n    let styles = { width }\n\n    return (\n      <div className=\"multi-menu\" style={styles}>\n        {menu && menu.length > 0\n          ? menu.map((itm, i) => (\n              <MenuItem\n                key={i}\n                data={itm}\n                onHover={onHover}\n                onSelect={onSelect}\n                openPath={openPath}\n                path={basePath.concat([i])}\n              />\n            ))\n          : <div className=\"multi-menu-empty\">Nothing Available</div>}\n      </div>\n    )\n  }\n}\n\nexport const MenuSpacer = () => (<div className=\"multi-menu-spacer\" />)\n\nexport class MenuItem extends Component {\n  handleClick = e => {\n    let { data: { value }, onSelect } = this.props\n\n    if (!onSelect || value === undefined) { return }\n\n    onSelect(value)\n  }\n\n  handleHover = e => {\n    let { data, path, onHover } = this.props\n\n    e.stopPropagation()\n\n    if (data.disabled) { return }\n\n    if (data && data.children && data.children.length) {\n      onHover(path)\n    } else {\n      onHover(path.slice(0, path.length - 1))\n    }\n  }\n\n  render() {\n    let { data, path, onHover, onSelect, openPath } = this.props\n\n    if (data === null) {\n      return <MenuSpacer />\n    }\n\n    let { disabled } = data\n\n    let open = matches(openPath, path)\n    let hasChildren = data.children && data.children.length > 0\n    let childrenOnly = false\n\n    if (data.value === undefined) {\n      if (hasChildren) { childrenOnly = true }\n      else { disabled = true }\n    }\n\n    return (\n      <div\n        className={classNames(\n          'multi-menu-item',\n          {\n            disabled,\n            open,\n            'has-children': hasChildren,\n            'children-only': childrenOnly\n          }\n        )}\n        onMouseOver={this.handleHover}\n      >\n        <div\n          className=\"multi-menu-item-label\"\n          onClick={this.handleClick}\n          title={data.label}\n        >\n          {data.label}\n          {data.subtitle\n            ? <span className=\"multi-menu-item-subtitle\">\n                {data.subtitle}\n              </span>\n            : null}\n        </div>\n        {open && hasChildren\n          ? <div\n              className=\"multi-menu-child\"\n              onMouseOver={stopPropagation}\n            >\n              <MultiMenu\n                basePath={path}\n                menu={data.children}\n                onHover={onHover}\n                onSelect={onSelect}\n                openPath={openPath}\n              />\n            </div>\n          : null}\n      </div>\n    )\n  }\n}\n\nexport class MultiMenuTrigger extends Component {\n  state = { expanded: false, position: null, expandDirection: null }\n\n  handleClick = e => {\n    if (this.state.expanded) {\n      return this.setState({ expanded: false })\n    }\n\n    let { fitParent } = this.props\n\n    let position = this.state.position\n    let expandDirection = RIGHT\n\n    if (this.element) {\n      let rect = this.element.getBoundingClientRect()\n      let windowWidth = window.innerWidth\n\n      let center = (rect.left + rect.right) / 2\n\n      if (center * 2 > windowWidth) {\n        expandDirection = LEFT\n      }\n\n      position = { top: rect.bottom + 8 }\n      let menuWidth = 180\n\n      if (fitParent) {\n        position = { top: rect.bottom, left: rect.left, width: rect.width }\n      } else if (center - menuWidth / 2 < 20) {\n        position.left = rect.left\n      } else if (center + menuWidth / 2 > windowWidth - 20) {\n        position.left = rect.right - menuWidth\n      } else {\n        position.left = center - menuWidth / 2\n      }\n    }\n\n    this.setState({ position, expandDirection, expanded: true })\n  }\n\n  handleSelect = val => {\n    let { onSelect } = this.props\n\n    this.setState({ expanded: false })\n\n    if (onSelect) {\n      onSelect(val)\n    }\n  }\n\n  handleClickOutside = e => {\n    if (isDescendent(e.target, this.element)) { return }\n\n    this.setState({ expanded: false })\n  }\n\n  handleClose = () => {\n    this.setState({ expanded: false })\n  }\n\n  handleScroll = e => {\n    e.preventDefault()\n  }\n\n  handleKeyDown = e => {\n    if (e.which === ESC) {\n      this.setState({ expanded: false })\n    }\n  }\n\n  handleBlur = () => {\n    this.setState({ expanded: false })\n  }\n\n  elementRef = el => this.element = el\n\n  componentWillMount() {\n    window.addEventListener('blur', this.handleBlur)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('blur', this.handleBlur)\n  }\n\n  render() {\n    let { children, className, dark, menu } = this.props\n    let { expandDirection, expanded, position } = this.state\n\n    return (\n      <div\n        className={classNames(\n          'multi-menu-trigger',\n          className,\n          { expanded, 'multi-menu-dark': dark }\n        )}\n        ref={this.elementRef}\n      >\n        {expanded\n          ? <div\n              className=\"multi-menu-trigger-close\"\n              onMouseDown={this.handleClose}\n            />\n          : null}\n        {expanded\n          ? <DocumentEvents\n              onMouseDown={this.handleClickOutside}\n              onWheel={this.handleScroll}\n              onKeyDown={this.handleKeyDown}\n            />\n          : null}\n        {expanded\n          ? <MultiMenuWrapper\n              expandDirection={expandDirection}\n              menu={menu}\n              onSelect={this.handleSelect}\n              position={position}\n            />\n          : null}\n        <div className=\"multi-menu-trigger-element\" onMouseDown={this.handleClick}>\n          {children}\n        </div>\n      </div>\n    )\n  }\n}\n"]}